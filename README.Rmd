---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  dpi = 400
)

library(dplyr)
library(ggplot2)
```

# PackageBluishgreen

<!-- badges: start -->
[![R-CMD-check](https://github.com/Kevin-Haigis-Lab/PackageBluishgreen/workflows/R-CMD-check/badge.svg)](https://github.com/Kevin-Haigis-Lab/PackageBluishgreen/actions)
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
<!-- badges: end -->

The goal of `PackageBluishgreen` is to package the internals for clustering cells for Olesja Popow (pronounced "po-pow").
The cells were identified using the TUNEL algorithm which output DAPI and FITC values for each cell into a CSV. 
This package takes these outputs and clusters them by their FITC intensity.

> This package is still under development and the API may change.

## Installation

You can install the released version of PackageBluishgreen from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("PackageBluishgreen")
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(PackageBluishgreen)

lung_data <- system.file(
  "extdata",
  "unmicst-OP1165_liver_TUNEL_01.csv",
  package = "PackageBluishgreen"
) %>%
  readr::read_csv(col_types = readr::cols()) %>%
  janitor::clean_names() %>%
  select(
    cell_id,
    x = x_centroid,
    y = y_centroid,
    dapi = dapi_nuclei_mask,
    fitc = fitc_nuclei_mask,
    area:orientation
  )

head(lung_data)
```

```{r}
lung_slide <- tissue_slide(lung_data)
```

```{r}
plot_tissue(lung_slide, color = fitc)
```

```{r}
plot_density(lung_slide, value = fitc)
```

```{r}
lung_slide <- cluster_manually(lung_slide, fitc, cutoff = 4, transform = log10)
plot_slide_clusters(lung_slide)
```

```{r}
summarize_cluster_results(lung_slide)
```
